<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Pandoc - Convert Markdown to other formats via Pandoc  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="Pandoc - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Note: you are no longer recommended to use the pandoc() function in knitr. Please try the rmarkdown package instead: http://rmarkdown.rstudio.com
[&amp;hellip;] The function pandoc() in knitr (since &amp;hellip;">
      <meta property="og:description" content="Note: you are no longer recommended to use the pandoc() function in knitr. Please try the rmarkdown package instead: http://rmarkdown.rstudio.com
[&amp;hellip;] The function pandoc() in knitr (since &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="https://yihui.name/images/logo.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5cdemo%5c2013-03-06-pandoc.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Pandoc</h1>
<h1><span class="subtitle">Convert Markdown to other formats via Pandoc</span></h2>

<h3>
2013-03-06</h3>

<hr>


      </header>





<p>Note: you are no longer recommended to use the <code>pandoc()</code> function in <strong>knitr</strong>. Please try the <strong>rmarkdown</strong> package instead: <a href="http://rmarkdown.rstudio.com">http://rmarkdown.rstudio.com</a></p>

<hr />

<p>The function <code>pandoc()</code> in <strong>knitr</strong> (since version 1.2) was designed to
convert Markdown documents to other formats such as LaTeX/PDF, HTML and Word
(odt/docx). The main idea is to minimize the command-line call by wrapping
commands into a configuration file or embedded configurations. Normally we
call Pandoc via command line like this:</p>

<pre><code class="language-bash">pandoc -s --mathjax --number-sections --bibliography=foo.bib \
  -o output.html input.md
</code></pre>

<p>It is tedious to type the same command again and again. What <code>pandoc()</code> does
is to execute the command like above in R via <code>system()</code>, but read the
Pandoc arguments from a config file, so that we can write all arguments in
the file once, and simply call <code>pandoc('input.md')</code> afterwards.</p>

<p>Please follow the instructions on the <a href="http://pandoc.org">Pandoc
website</a> to install it.</p>

<h2 id="absolute-beginners">Absolute beginners</h2>

<p>If you have no experience using the command line, you can try this function
without any configurations. Write a Markdown file, say, <code>foo.md</code>, and throw
it into <code>pandoc()</code>:</p>

<pre><code class="language-r">library(knitr)
pandoc('foo.md', format='html')  # HTML
pandoc('foo.md', format='latex') # LaTeX/PDF
pandoc('foo.md', format='docx')  # MS Word
pandoc('foo.md', format='odt')   # OpenDocument
</code></pre>

<p>But you often need some custom options like what we showed in the beginning.
Now we explain how to pass such options to Pandoc.</p>

<h2 id="a-simple-example">A simple example</h2>

<p>Suppose you want to convert Markdown to HTML with arguments in the first
command line example, you can write a config file like this:</p>

<pre><code class="language-yaml">t: html
s: 
mathjax: 
number-sections: 
bibliography: foo.bib
o: output.html
</code></pre>

<p>You can save it as <code>foo.txt</code> and run</p>

<pre><code class="language-r">library(knitr)
pandoc('input.md', format='html', config='foo.txt')
</code></pre>

<p>Then <strong>knitr</strong> will parse this config file and turn it into pandoc
arguments. The empty options such as <code>s</code> and <code>mathjax</code> are turned to <code>-s</code>
and <code>--mathjax</code> respectively, and those non-empty options like <code>bibliography</code>
and <code>o</code> are converted to <code>--bibliography=foo.bib</code> and <code>-o output.html</code>
respectively.</p>

<h2 id="the-config-file">The config file</h2>

<p>The config file is essentially a Debian Control File. Here are some rules:</p>

<ol>
<li>the option name and value are separated by <code>:</code></li>
<li>an option can have a value of multiple lines but all the following lines
have to be indented by white spaces</li>
<li>blank lines are used to separate records (paragraphs)</li>
</ol>

<p>The first rule is simple. For the second rule, consider <code>bibliography</code>: when
there are multiple bibliography databases to be passed to Pandoc, we can
write the config file as</p>

<pre><code class="language-yaml">bibliography: paper1.bib
  paper2.bib
  paper3.bib
</code></pre>

<p>In this case, it is converted to <code>--bibliography=paper1.bib
--bibliography=paper2.bib --bibliography=paper3.bib</code> and passed to Pandoc.</p>

<p>For the third rule, it is useful when we define multiple output formats in
the config file; below is an example of two records for <code>html</code> and <code>latex</code>
output:</p>

<pre><code class="language-yaml">t: html
s: 
mathjax: 
number-sections: 
bibliography: foo.bib
o: output.html

t: latex
latex-engine: xelatex
s: 
number-sections: 
output: test.pdf
</code></pre>

<p>With this config file, we can call <code>pandoc('input.md', format='latex',
config='foo.txt')</code> and we will get a PDF file <code>test.pdf</code>.</p>

<p>The name of the config file is obtained from <code>getOption('config.pandoc')</code> by
default, which means you can set <code>options(config.pandoc =
'path/to/your/config.file')</code> as a global option. If this option is not set,
the <code>pandoc()</code> function will look for a file <code>foo.pandoc</code> where <code>foo</code> is the
base name of the input file, e.g. it looks for <code>test.pandoc</code> if the input
file is <code>test.md</code>. In other words, the config file has the same name as the
Markdown file except that it has a different extension.</p>

<h2 id="common-options">Common options</h2>

<p>Sometimes we want to share some a few common options across different output
formats. For instance, <code>--number-sections</code> can be used for both PDF and HTML
output. The record that does not contain the <code>t</code> tag is treated as common
options for all formats. Now we can rewrite the above config file as:</p>

<pre><code class="language-yaml">s: 
number-sections: 

t: html
mathjax: 
bibliography: foo.bib
o: output.html

t: latex
latex-engine: xelatex
output: test.pdf
</code></pre>

<p>Note the <code>s</code> and <code>number-sections</code> are extracted to a separate record
without a <code>t</code> tag.</p>

<h2 id="embedded-configurations">Embedded configurations</h2>

<p>We may want to make the Markdown file self-contained in the sense that the
configurations are embedded in it, so we do not need to rely on an external
config file. In this case, we can use a special comment <code>&lt;!--pandoc --&gt;</code> in
the Markdown file.</p>

<pre><code class="language-html">&lt;!--pandoc
t: html
s:
mathjax:
number-sections:
bibliography: foo.bib
o: output.html
--&gt;
</code></pre>

<p>Now we can pass a single file to other people and they will be able to call
<code>pandoc()</code> to convert it to the expected format.</p>

<p>If both the config file and embedded configurations are found, they will be
combined as if they were from a single file.</p>

<h2 id="complete-examples">Complete examples</h2>

<p>See the example <a href="https://github.com/yihui/knitr-examples">084</a> (using an external
<a href="https://github.com/yihui/knitr-examples/blob/master/084-pandoc.pandoc">config file</a>)
and <a href="https://github.com/yihui/knitr-examples">088</a> (using embedded configurations).</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/knitr/demo/wordpress/">WordPress</a></span>
  <span class="nav-next"><a href="/knitr/demo/showcase/">knitr showcase</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/knitr\/demo\/wordpress\/';
    
  } else if (e.which == 39) {  
    
    url = '\/knitr\/demo\/showcase\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

