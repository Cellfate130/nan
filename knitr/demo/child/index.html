<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Child documents - Input child files into the main document  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="Child documents - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="It can sometimes be convenient to separate a large document in several smaller documents that are reunited as necessary at compilation time in a main document. Like the command \SweaveInput{} in &amp;hellip;">
      <meta property="og:description" content="It can sometimes be convenient to separate a large document in several smaller documents that are reunited as necessary at compilation time in a main document. Like the command \SweaveInput{} in &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="https://yihui.name/images/logo.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5cdemo%5c2012-01-18-child.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Child documents</h1>
<h1><span class="subtitle">Input child files into the main document</span></h2>

<h3>
2012-01-18</h3>

<hr>


      </header>





<p>It can sometimes be convenient to separate a large document in several smaller documents that are reunited as necessary at compilation time in a main document. Like the command <code>\SweaveInput{}</code> in Sweave, <strong>knitr</strong> also has the similar functionality, which enables us to insert child documents into a main document. The idea is like the command <code>\input{}</code> or <code>\include{}</code> in LaTeX to manage a large document in smaller parts. There are two approaches to input child documents in a main document. We can also compile an incomplete child document as a complete LaTeX document when we specify its parent with <code>set_parent()</code>.</p>

<p>Note <strong>knitr</strong> accepts child documents in the Markdown format, as well as in the LaTeX/Sweave format and other formats.</p>

<h2 id="using-chunk-option-child-for-markdown-rmd-documents">Using chunk option <code>child</code> for Markdown (.Rmd) documents</h2>

<p>The chunk option <code>child</code> supports the inclusion of child documents. For example here is how to combine a main document with a child document. We create a child document named <code>knitr-child.Rmd</code>:</p>

<pre><code class="language-markdown"># Details from the child document

Hi, there. I'm a child with a plot and as many details as necessary.

```{r test-child}
plot(trees)
```
</code></pre>

<p>and we create a main document named <code>main.Rmd</code></p>

<pre><code class="language-yaml">---
title: &quot;Main report&quot;
output: html_document
---
</code></pre>

<pre><code class="language-markdown"># Summary 

```{r test-main, child = 'knitr-child.Rmd'}
```

# Conclusion
</code></pre>

<p>Compiling <code>main.Rmd</code> generates HTML output for both documents. The content of the child document is located in the middle of the main document, inserted at the placeholder defined by <code>```{r test-main, child = 'knitr-child.Rmd'}</code>.</p>

<h2 id="using-chunk-option-child-for-latex-rnw-documents">Using chunk option <code>child</code> for Latex (.Rnw) documents</h2>

<p>The chunk option <code>child</code> supports the inclusion of child documents. For example, we have a main document named <a href="https://github.com/yihui/knitr/blob/master/inst/examples/knitr-input.Rnw"><code>knitr-input.Rnw</code></a> here:</p>

<pre><code class="language-tex">\documentclass{article}
\begin{document}

&lt;&lt;test-main&gt;&gt;=
options(width = 60)
summary(iris)
@

Let's see how to work with child documents in knitr. Below we input
the file \textsf{knitr-input-child.Rnw}:

&lt;&lt;child-demo, child='knitr-input-child.Rnw'&gt;&gt;=
@

Done!

\end{document}
</code></pre>

<p>We want to include a child document <a href="https://github.com/yihui/knitr/blob/master/inst/examples/knitr-input-child.Rnw"><code>knitr-input-child.Rnw</code></a> in it:</p>

<pre><code class="language-r">This chunk below is from the child document.

&lt;&lt;test-child, out.width='2in'&gt;&gt;=
1+1
rnorm(5)
plot(1)
boxplot(1:10)
str(mtcars)
@
</code></pre>

<p>You then can compile the main document with:</p>

<pre><code class="language-r">library(knitr)
knit('knitr-input.Rnw')
## child document will be compiled too
</code></pre>

<p>You can freely nest one Rnw document in the other, as long as the nested structure is clear in your mind.</p>

<h2 id="using-knit-child-with-inline-r-code">Using <code>knit_child()</code> with inline R code</h2>

<p>Sweave searches for <code>\SweaveInput{}</code> in the main document, and weaves the child documents, whereas <strong>knitr</strong> does not search for such character strings, instead, you can directly use <code>\Sexpr{}</code> with the function <code>knit_child()</code> to input a child document.</p>

<p>The above example can be equivalently done with:</p>

<pre><code class="language-tex">\Sexpr{knit_child('knitr-input-child.Rnw')}
</code></pre>

<p>The function <code>knit_child()</code> is just a wrapper to <code>knit()</code> and returns the compiled content as a character string to be inserted into the main output document.</p>

<p>Be sure to read <code>?knit_child</code> to know more about the control of evaluation (argument <code>eval</code>), which is similar to what was described above in the first approach.</p>

<h2 id="comments-on-sweaveinput">Comments on <code>\SweaveInput{}</code></h2>

<p>It is strongly discouraged to use <code>\SweaveInput{}</code>, and this command has been deprecated since <strong>knitr</strong> v1.0. Originally I did not plan to support <code>\SweaveInput{}</code> (but I did it later anyway in <a href="https://github.com/yihui/knitr/issues/39">#39</a>), and here were my reasons:</p>

<ol>
<li>I want to keep the number of new LaTeX commands minimal; if <code>\Sexpr{}</code> does the job, I do not want to use another <code>\SweaveInput{}</code> (I expressed my opinion on why I do not like these pseudo-LaTeX commands in the end of the demo page of <a href="../minimal/">minimal examples</a>);</li>
<li>I tend to think <code>&lt;&lt;&gt;&gt;=</code> holds meta information about the literate programming document, and <code>&lt;&lt;child='foo-bar.Rnw'&gt;&gt;=</code> is one piece of the meta information telling <strong>knitr</strong> that for this chunk, please compile and input a child document here; it is essentially not a LaTeX command, so I do not want a command <code>\FooBarInput{}</code> which looks like <code>\input{}</code>;</li>
<li>The implementation in <strong>knitr</strong> is more flexible than <code>\SweaveInput{}</code> because it supports conditional evaluation as well; you can use <code>knit_child('foo-bar.Rnw', eval=dothis)</code> or <code>&lt;&lt;child='foo-bar.Rnw', eval=dothis&gt;&gt;=</code> where the global variable <code>dothis</code> is a logical variable which controls if this expression or chunk should be evaluated; if <code>dothis == FALSE</code>, you have essentially commented out the child document; meanwhile, it is also possible to input multiple child documents in a chunk like <code>&lt;&lt;child=c('foo1.Rnw', 'foo2.Rnw', 'foo3.Rnw')&gt;&gt;=</code>; you can easily group a set of child documents together to form a report in this way;</li>
<li>It brings me additional difficulty to parse <code>\SweaveInput{}</code> from the source document (<code>\SweaveOpts{}</code> has the same trouble);</li>
</ol>

<p>You may use this a piece of R code for the transition from Sweave to <strong>knitr</strong>:</p>

<pre><code class="language-r">kids = list.files(pattern = '\\.Rnw$')
sprintf(&quot;&lt;&lt;child%s, child='%s'&gt;&gt;=&quot;, 1:length(kids), kids)
## copy the results to save some typing efforts
</code></pre>

<h2 id="knit-child-documents-in-a-standalone-mode">Knit child documents in a standalone mode</h2>

<p>Child documents are often incomplete &ndash; the missing part is the LaTeX preamble as well as <code>\begin{document}</code> and <code>\end{document}</code>. Sometimes we may want to compile such child documents as if they were complete LaTeX documents. The only one thing we need to do is to extract an appropriate preamble from a parent document and add it to this child document. The function <code>set_parent()</code> enables this feature; we can use it either in <code>\Sexpr{}</code> or a code chunk in the child document, e.g.</p>

<pre><code class="language-tex">\Sexpr{set_parent('main-document.Rnw')}
</code></pre>

<p>or</p>

<pre><code class="language-r">&lt;&lt;set-parent, echo=FALSE, cache=FALSE&gt;&gt;=
set_parent('main-document.Rnw')
@
</code></pre>

<p>Then the child document will behave as if it had a preamble &ndash; the output LaTeX document will have a preamble, and the tikz graphics in this document will be affected by the preamble as well.</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/knitr/demo/reference/">Chunk Reference/Macro</a></span>
  <span class="nav-next"><a href="/knitr/demo/vignette/">Package vignettes</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/knitr\/demo\/reference\/';
    
  } else if (e.which == 39) {  
    
    url = '\/knitr\/demo\/vignette\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

