<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Control output - Manipulate six types of chunk output and inline output  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="Control output - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="As introduced in the main manual, knitr uses the evaluate package to evaluate R code chunks, and there are six types of output: source code, normal text output, messages, warnings, errors and plots. &amp;hellip;">
      <meta property="og:description" content="As introduced in the main manual, knitr uses the evaluate package to evaluate R code chunks, and there are six types of output: source code, normal text output, messages, warnings, errors and plots. &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="https://yihui.name/images/logo.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5cdemo%5c2012-01-25-output.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Control output</h1>
<h1><span class="subtitle">Manipulate six types of chunk output and inline output</span></h2>

<h3>
2012-01-25</h3>

<hr>


      </header>





<p>As introduced in the <a href="https://github.com/yihui/knitr/releases/download/doc/knitr-manual.pdf">main manual</a>, <strong>knitr</strong> uses the <strong>evaluate</strong> package to evaluate R code chunks, and there are six types of output: source code, normal text output, messages, warnings, errors and plots. Below we give a summary on the fine control over them.</p>

<ol>
<li>source code: use chunk option <code>echo</code>, e.g. <code>echo=FALSE</code> hides the R code</li>
<li>normal text output: use option <code>results</code> (<code>markup</code> marks up the results; <code>asis</code> return texts as-is; <code>hide</code> hides the results)</li>
<li>messages: option <code>message</code> (<code>FALSE</code> hides messages in the output)</li>
<li>warnings: option <code>warning</code> (<code>FALSE</code> hides warnings in the output)</li>
<li>errors: option <code>error</code> (<code>FALSE</code> will make R stop if an error occurs; <code>TRUE</code> will show the error messages in the output)</li>
<li>plots: option <code>fig.keep</code> (<code>none</code> discards all plots; <code>all</code> for all plots including low-level plots; <code>high</code> for high-level plots)</li>
</ol>

<p>These options are orthogonal to each other, so you are free to turn on/off one type of output without affecting other pieces.</p>

<p>Note all <a href="../../options/">options</a> in <strong>knitr</strong> can take values from R expressions, which brings the feature of conditional evaluation introduced in the main manual. In short, <code>eval=dothis</code> means the real value of <code>eval</code> is taken from a variable named <code>dothis</code> in the global environment; by manipulating this variable, we can turn on/off the evaluation of a batch of chunks.</p>

<h2 id="advanced-usage-of-the-echo-option">Advanced usage of the <code>echo</code> option</h2>

<p>Besides <code>TRUE/FALSE</code>, the chunk option <code>echo</code> can also take a numeric vector to selectively echo source code in the output. This vector indexes the complete R expresions in the code chunk, e.g. <code>echo=1</code> means only include the first expression in the output. Below is a complete example:</p>

<pre><code class="language-r">&lt;&lt;hide-par, echo=3:4&gt;&gt;=
## 'ugly' code that I do not want to show
par(mar = c(4, 4, 0.1, 0.1), cex.lab = 0.95, cex.axis = 0.9,
    mgp = c(2, 0.7, 0), tcl = -0.3)
plot(mtcars[, 1:2])
plot(mtcars[, 4:5])
@
</code></pre>

<p>The <code>par()</code> expression is not essential to this code chunk, and it is even distracting to the readers, so we may want to hide it in the output. In this particular case, we do not want the first expression (comments) either; <code>echo=3:4</code> means the third and fourth expressions are to be included in the output. Note the index of an expression is not necessarily the same as its line number. Alternatively, we can use <code>echo=-(1:2)</code> to remove the first two expressions.</p>

<p>It may be confusing to the reader if you select a discrete subset of the source code; often times we should use <code>a:b</code> or <code>-(a:b)</code> to select a (relatively) complete subset. However, nobody can stop you from doing so:</p>

<pre><code class="language-r">% select 3rd and 5th expressions
&lt;&lt;hide-par, echo=c(3, 5)&gt;&gt;=
## 'ugly' code that I do not want to show
par(mar = c(4, 4, 0.1, 0.1), cex.lab = 0.95, cex.axis = 0.9,
    mgp = c(2, 0.7, 0), tcl = -0.3)
plot(mtcars[, 1:2])
par(mar = c(4, 4, 1, 0.5)) # reset margins
plot(mtcars[, 4:5])
@
</code></pre>

<h2 id="inline-output">Inline output</h2>

<p>Besides chunk output, there is another type of output: inline R code output (e.g. <code>\Sexpr{t.test(x)$p.value}</code>). Numeric output is treated specially: the numbers will be written in scientific notations if they are too big or small. The threshold between scientific notation and fixed notation is the R option <code>scipen</code> (see <code>?options</code> for details). Basically if a number is bigger than <code>10^4</code> or smaller than <code>10^{-4}</code> (applies to the absolute values of negative numbers too), it will be denoted in scientific notation. Depending on the output format (LaTeX or HTML), <strong>knitr</strong> will use the appropriate code like <code>$3.14 \times 10^5$</code> or <code>3.14 &amp;times; 10&lt;sup&gt;5&lt;/sup&gt;</code>.</p>

<p>Another R option <code>digits</code> controls how many digits a number should be rounded with. If you do not like the default <code>options(scipen = 0, digits = 4)</code>, you can change them in the first chunk like:</p>

<pre><code class="language-r">&lt;&lt;setup, echo=FALSE, cache=FALSE&gt;&gt;=
## numbers &gt;= 10^5 will be denoted in scientific notation,
## and rounded to 2 digits
options(scipen = 1, digits = 2)
@
</code></pre>

<p>A Markdown example:</p>

<pre><code>Inline code looks like this `r 1+1`
</code></pre>

<p>The above would print <code>2</code>, inline with the rest of the sentence.</p>

<p>An Rnw example (LaTeX):</p>

<pre><code class="language-tex">Inline code looks like this \Sexpr{1+1}
</code></pre>

<p>An R HTML example:</p>

<pre><code class="language-html">&lt;p&gt;Inline code looks like this &lt;!--rinline 1+1 --&gt;&lt;/p&gt;
</code></pre>

<p>For R HTML documents, the character results are written in <code>&lt;code&gt;&lt;/code&gt;</code> by default. If you would like to drop the <code>&lt;code&gt;&lt;/code&gt;</code> tags in the output, simply wrap your R code with <code>I()</code>. For example,</p>

<pre><code class="language-html">&lt;p&gt;Inline code looks like this &lt;!--rinline I(1+1) --&gt;&lt;/p&gt;
</code></pre>

<p>See this <a href="http://stackoverflow.com/q/14124022/559676">SO post</a> for another example.</p>

<h2 id="long-lines-of-text-output">Long lines of text output</h2>

<p>Normally R respects the option <code>width</code> (set via <code>options(width = ??)</code>) when printing text output, e.g. <code>rnorm(100)</code>. The default value for <code>width</code> is set to <code>75</code> and it is likely you want a smaller value if you use LaTeX. In some cases, you may see the output is still too width even if you have set this option to be a small value, and that is usually because R does not respect this option. I cannot do much about this, although there can be some hacks on <strong>knitr</strong>&rsquo;s side. See <a href="https://github.com/yihui/knitr/issues/421">#421</a> for one example.</p>

<h2 id="one-comment-on-messages">One comment on messages</h2>

<p>Many people like to use <code>cat()</code> to write messages in R, and this is a very bad practice, because it is inconvenient to turn off such messages. When we really mean <em>messages</em>, we should use <code>message()</code>. These regular messages can be conveniently suppressed by <code>suppressMessages()</code> or captured by <strong>knitr</strong>. Some package authors did not seem to pay attention to this issue; when we load a package or use functions in a package, we may see fake messages that cannot be supppressed. If a startup message is really necessary, it should be put in <code>packageStartupMessage()</code>. When you are unable to turn off some messages by <code>message=FALSE</code> in <strong>knitr</strong>, it is probably time to request the package authors to make some changes.</p>

<p>Similarly, we should use <code>warning()</code> when we really mean a warning.</p>

<p>So watch out your <code>cat</code>s!</p>

<h2 id="misc">Misc</h2>

<p>If you use <code>echo=FALSE, results='hide'</code> on a chunk, you may see extra empty lines in the output; if you do not want these empty lines, see <a href="https://github.com/yihui/knitr/issues/231">#231</a> for a possible solution.</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/knitr/demo/vignette/">Package vignettes</a></span>
  <span class="nav-next"><a href="/knitr/demo/stitch/">Quick reporting</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/knitr\/demo\/vignette\/';
    
  } else if (e.which == 39) {  
    
    url = '\/knitr\/demo\/stitch\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

