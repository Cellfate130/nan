<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Quick reporting - Build a report based on an R script  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="Quick reporting - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Sometimes we just want to run the code in an R script to create a report. Indeed you can paste the code in an R console, and copy the results. This is often very messy (code mangled with results), and &amp;hellip;">
      <meta property="og:description" content="Sometimes we just want to run the code in an R script to create a report. Indeed you can paste the code in an R console, and copy the results. This is often very messy (code mangled with results), and &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="https://yihui.name/images/logo.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5cdemo%5c2012-01-26-stitch.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Quick reporting</h1>
<h1><span class="subtitle">Build a report based on an R script</span></h2>

<h3>
2012-01-26</h3>

<hr>


      </header>





<p>Sometimes we just want to run the code in an R script to create a report. Indeed you can paste the code in an R console, and copy the results. This is often very messy (code mangled with results), and most importantly, you lose the graphics output.</p>

<h2 id="stitch-feed-a-template-with-an-r-script">stitch(): feed a template with an R script</h2>

<p><strong>Knitr</strong> introduced a function <code>stitch()</code> to conveniently insert an R script into a template to create a simple report, preserving everything in the R output (either text results or plots). See <code>?stitch</code> for details.</p>

<p>There are a LaTeX template, an HTML template and a markdown template in <strong>knitr</strong>. The first one can produce a PDF document, and the second can produce an HTML page. My motivation with this function is to make it easier for students to turn their R scripts into reports (e.g. homework) quickly. The traditional way is usually they run code in R, do the tedious job of collecting results line by line, copy and paste them into (ugly-looking) MS Word. With this function, they can either turn in the PDF document, publish the HTML pages on the web, or share the HTML page in some other way.</p>

<p>The usage is simple: just provide the path of the R script as the first argument to <code>stitch()</code>. It uses the LaTeX template by default.</p>

<h2 id="spin-comment-out-texts">spin(): comment out texts</h2>

<p>The other way to write a quick report based on a pure R script is to use <code>spin()</code>. The R script needs to follow the rules below:</p>

<ul>
<li>texts in roxygen comments <code>#'</code> are preserved as normal texts (may contain inline R code);</li>
<li>chunk options are written after <code>#+</code> or <code>#-</code>, e.g. <code>#+ chunk-label, opt1=value1, opt2=value2</code></li>
</ul>

<p>In this way, anything that is not R code is commented out.</p>

<pre><code class="language-r">#' Some texts here.

#+ test, echo=TRUE
rnorm(5)
</code></pre>

<p>This will be converted to a literate programming document, e.g. (depending on the output format)</p>

<pre><code class="language-r">Some texts here.

&lt;&lt;test, echo=TRUE&gt;&gt;=
rnorm(5)
@
</code></pre>

<p>See <a href="https://github.com/yihui/knitr/blob/master/inst/examples/knitr-spin.R">knitr-spin.R</a> for a full example (<a href="https://github.com/yihui/knitr/blob/master/inst/examples/knitr-spin.Rmd">knitr-spin.Rmd</a> is the Rmd output, and you can make other formats like Rnw, RHTML and Rrst, etc).</p>

<pre><code class="language-r">library(knitr)
(s = system.file(&quot;examples&quot;, &quot;knitr-spin.R&quot;, package = &quot;knitr&quot;))
spin(s)  # default markdown
o = spin(s, knit = FALSE)  # convert to Rmd only
knit2html(o)  # compile to HTML

# other formats
spin(s, FALSE, format = &quot;Rnw&quot;)  # you need to write documentclass after #'
spin(s, FALSE, format = &quot;Rhtml&quot;)
spin(s, FALSE, format = &quot;Rtex&quot;)
spin(s, FALSE, format = &quot;Rrst&quot;)
</code></pre>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/knitr/demo/output/">Control output</a></span>
  <span class="nav-next"><a href="/knitr/demo/org/">Org-mode</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/knitr\/demo\/output\/';
    
  } else if (e.which == 39) {  
    
    url = '\/knitr\/demo\/org\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>




  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

