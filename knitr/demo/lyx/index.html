<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>LyX - Using knitr with LyX  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="LyX - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Since LyX 2.0.3, knitr can be used in LyX via a module named Rnw (knitr). See knitr.lyx for a simple example (pdf output). Just add the module to your document and install knitr in R; then you are &amp;hellip;">
      <meta property="og:description" content="Since LyX 2.0.3, knitr can be used in LyX via a module named Rnw (knitr). See knitr.lyx for a simple example (pdf output). Just add the module to your document and install knitr in R; then you are &amp;hellip;">
      
    

    
    
    <meta name="twitter:image" content="https://db.yihui.name/imgur/jEKSh.png">
    
    
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5cdemo%5c2011-12-06-lyx.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>LyX</h1>
<h1><span class="subtitle">Using knitr with LyX</span></h2>

<h3>
2011-12-06</h3>

<hr>


      </header>





<p>Since LyX 2.0.3, <strong>knitr</strong> can be used in LyX via a module named <code>Rnw
(knitr)</code>. See
<a href="https://github.com/yihui/lyx/raw/master/examples/knitr.lyx">knitr.lyx</a> for
a simple example (<a href="https://bitbucket.org/stat/lyx/downloads/knitr.pdf">pdf
output</a>). Just add the
module to your document and install <strong>knitr</strong> in R; then you are done.</p>

<p><img src="https://db.yihui.name/imgur/jEKSh.png" alt="knitr module in LyX" /></p>

<p>An important note to all LyX users: a big trouble with LyX+Sweave is that we
have got too many instructions in the past on how to configure LyX in order
to work with Sweave. Many tutorials are becoming misleading and confusing
(e.g. you no longer need to take care of <code>noweb.sty</code>). The only up-to-date
source is the <a href="https://bitbucket.org/stat/lyx/downloads/sweave.pdf">official LyX manual for
Sweave</a>.</p>

<h2 id="ubuntu-users">Ubuntu users</h2>

<p>To install LyX, you can either check out the source code and compile it by
yourself:</p>

<pre><code class="language-bash">./authgen.sh
./configure
make
make install
</code></pre>

<p>or use the <a href="https://launchpad.net/~lyx-devel/+archive/release">PPA</a> (much
easier):</p>

<pre><code class="language-bash">sudo add-apt-repository ppa:lyx-devel/release
sudo apt-get update
sudo apt-get install lyx
</code></pre>

<p>The one in the official repository is often lagging behind, and this PPA is
up-to-date.</p>

<h2 id="other-systems">Other systems</h2>

<p>If you use Windows or Mac OS, you can download LyX from <a href="http://www.lyx.org">http://www.lyx.org</a>.</p>

<p>The most frequently seen trouble for Windows users is that R is not in <code>PATH</code>
by default; see the manual above or the <a href="http://stackoverflow.com/q/9645451/559676">StackOverflow
post</a> for the solution.</p>

<h2 id="other-languages">Other languages</h2>

<p>If you are under Windows and using multibyte characters, you need at least
LyX 2.0.6 and <strong>knitr</strong> 1.1. If your LyX version is lower than 2.0.6, you
are likely to run into problems due to the file encoding.</p>

<h2 id="other-examples">Other examples</h2>

<p>There are a couple of LyX examples under the <a href="https://github.com/yihui/knitr/tree/master/inst/examples">examples
directory</a> of the
package repository. Remember to check out the bib files as well if there are
any.</p>

<p>Below is a short video of using <strong>knitr</strong> in LyX (no audio at the moment but
I plan to make a full tutorial in the future):</p>

<div style="text-align: center;"><iframe src="http://player.vimeo.com/video/32948939?title=0&amp;byline=0&amp;portrait=0" width="600" height="458" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe><p><a href="http://vimeo.com/32948939">Using knitr in LyX</a> from <a href="http://vimeo.com/yihui">Yihui Xie</a> on <a href="http://vimeo.com">Vimeo</a>.</p></div>

<h2 id="some-known-issues">Some known issues</h2>

<p>You should not let LyX mark foreign languages, otherwise it may ruin R code
chunks; see <a href="https://github.com/yihui/knitr/issues/255">#255</a> for details.
Below are my language preferences in LyX:</p>

<p><img src="https://db.yihui.name/imgur/vkLhP.png" alt="Do not mark foreign languages" /></p>

<p>If your R code has output that contains single quotes, you may <a href="http://stackoverflow.com/q/12448507/559676">run into an
error</a> like:</p>

<pre><code class="language-tex">! Undefined control sequence.
&lt;argument&gt; ^^M'
               ^^M
l.8 \end{verbatim}
</code></pre>

<p>To fix it, you need to update <strong>knitr</strong> to at least version 1.2.</p>

<p>For Mac OS X users, your OS has a <a href="http://www.lyx.org/trac/ticket/8537#comment:19">weird
bug</a> that makes R fail to
set up the locale when started from LyX. As a result, R cannot process
multi-byte characters. You have to tell your locale info to R manually, e.g.
in <code>~/.Rprofile</code>:</p>

<pre><code class="language-r">cat('
Sys.setlocale(, &quot;en_US.UTF-8&quot;)
', file = '~/.Rprofile', append = TRUE)
</code></pre>

<p>Here <code>en_US.UTF-8</code> is just one possible locale. Your OS might be using other
languages. To check what is the real locale, run <code>Sys.getlocale()</code> in a
normal R session (e.g. start R from the terminal).</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/knitr/demo/manual/">Manual</a></span>
  <span class="nav-next"><a href="/knitr/demo/externalization/">Code Externalization</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/knitr\/demo\/manual\/';
    
  } else if (e.which == 39) {  
    
    url = '\/knitr\/demo\/externalization\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

