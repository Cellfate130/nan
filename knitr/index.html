<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>knitr - Elegant, flexible, and fast dynamic report generation with R  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="knitr - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="The knitr package was designed to be a transparent engine for dynamic report generation with R, solve some long-standing problems in Sweave, and combine features in other add-on packages into one &amp;hellip;">
      <meta property="og:description" content="The knitr package was designed to be a transparent engine for dynamic report generation with R, solve some long-standing problems in Sweave, and combine features in other add-on packages into one &amp;hellip;">
      
    

    
    
    <meta name="twitter:image" content="https://db.yihui.name/imgur/yYw46aF.jpg">
    
    
    
    

    

    
    <link href="/knitr/index.xml" rel="alternate" type="application/rss+xml" title="Yihui Xie | 谢益辉" />
    
    

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li class="active"><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5c_index.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>knitr</h1>
<h1><span class="subtitle">Elegant, flexible, and fast dynamic report generation with R</span></h2>

<hr>


      </header>





<h2 id="overview">Overview</h2>

<p>The <strong>knitr</strong> package was designed to be a transparent engine for dynamic
report generation with R, solve some long-standing problems in Sweave, and
combine features in other add-on packages into one package (<strong>knitr</strong>
&asymp; Sweave + cacheSweave + pgfSweave + weaver + <code>animation::saveLatex</code> +
<code>R2HTML::RweaveHTML</code> + <code>highlight::HighlightWeaveLatex</code> + 0.2 * brew + 0.1 *
SweaveListingUtils + more).</p>

<p><a href="https://amzn.com/1498716962"><img src="https://db.yihui.name/imgur/yYw46aF.jpg" align="right" width=200 style="margin-left: 1em;" /></a></p>

<ul>
<li>Transparency means that the user has full access to every piece of the
input and output, e.g., <code>1 + 2</code> produces <code>[1] 3</code> in an R terminal, and
<strong>knitr</strong> can let the user decide whether to put <code>1 + 2</code> between
<code>\begin{verbatim}</code> and <code>\end{verbatim}</code>, or <code>&lt;div class=&quot;rsource&quot;&gt;</code> and
<code>&lt;/div&gt;</code>, and put <code>[1] 3</code> in <code>\begin{Routput}</code> and <code>\end{Routput}</code>; see
the <a href="hooks">hooks</a> page for details</li>
<li><strong>knitr</strong> tries to be consistent with users&rsquo; expectations by running R code as
if it were pasted in an R terminal, e.g., <code>qplot(x, y)</code> directly produces
the plot (no need to <code>print()</code> it), and <em>all</em> the plots in a code chunk
will be written to the output by default</li>
<li>Packages like <strong>pgfSweave</strong> and <strong>cacheSweave</strong> have added useful features to
Sweave (high-quality tikz graphics and cache), and <strong>knitr</strong> has
simplified the implementations</li>
<li>The design of <strong>knitr</strong> allows any input languages (e.g. R, Python and awk)
and any output markup languages (e.g. LaTeX, HTML, Markdown, AsciiDoc, and
reStructuredText)</li>
</ul>

<p>This package is developed on  <a href="https://github.com/yihui/knitr">GitHub</a>; for
installation instructions and <a href="/knitr/faq">FAQ&rsquo;s</a>, see
<a href="https://github.com/yihui/knitr#readme">README</a>. This website serves as the
full documentation of <strong>knitr</strong>, and you can find the <a href="/knitr/demo/manual/">main
manual</a>, the <a href="/knitr/demo/graphics/">graphics manual</a>
and other <a href="/knitr/demos">demos</a> /
<a href="https://github.com/yihui/knitr-examples">examples</a> here. You can also watch a <a href="http://www.screenr.com/qcv8">5-min video introduction</a>. For a more
organized reference, see the <a href="https://github.com/yihui/knitr-book">knitr book</a>.</p>

<h2 id="motivation">Motivation</h2>

<p>One of the difficulties with extending Sweave is we have to copy a large
amount of code from the <strong>utils</strong> package (the file <code>SweaveDrivers.R</code> has
more than 700 lines of R code), and this is what the two packages mentioned
above have done. Once the code is copied, the package authors have to pay
close attention to what is changing in the version in official R &ndash;
apparently an extra burden. The <strong>knitr</strong> package tried to modularize the
whole process of weaving a document into small manageable functions, so it
is hopefully easier to maintain and extend (e.g. easy to support HTML
output); on the other hand, <strong>knitr</strong> has many built-in features and it
should not be the case to have to hack at the core components of this
package. By the way, several FAQ&rsquo;s in the Sweave manual are solved in
<strong>knitr</strong> directly.</p>

<blockquote>
<p>Let us change our traditional attitude to the construction of programs:
Instead of imagining that our main task is to instruct a computer what to
do, let us concentrate rather on explaining to humans what we want the
computer to do.</p>

<p>&mdash; Donald E. Knuth, Literate Programming, 1984</p>
</blockquote>

<h2 id="features">Features</h2>

<p>The ideas are borrowed from other packages, and some of them are
re-implemented in a different way (like cache). A selected list of features
include:</p>

<ul>
<li><em>faithful</em> output: using
<a href="https://cran.rstudio.com/package=evaluate"><strong>evaluate</strong></a> as the backend
to evaluate R code, <strong>knitr</strong> writes everything that you see in an R
terminal into the output by default, including printed results, plots and
even warnings, messages as well as errors (they should not be ignored in
serious computations, especially warnings)

<ul>
<li>a minor issue is that for grid-based graphics packages like <strong>ggplot2</strong> or
<strong>lattice</strong>, users often forget to <code>print()</code> the plot objects, because
they can get the output in an R terminal without really <code>print()</code>ing; in
<strong>knitr</strong>, what you get is what you expected</li>
</ul></li>
<li>built-in cache: ideas like <strong>cacheSweave</strong> but <strong>knitr</strong> directly uses base R
functions to fulfill cache and lazy loading, and another significant
difference is that a cached chunk can still have output (in <strong>cacheSweave</strong>,
cached chunks no longer have any output, even you explicitly <code>print()</code>
an object; <strong>knitr</strong> actually caches the chunk output as well)</li>
<li>formatting R code: the <a href="/formatR"><strong>formatR</strong></a>
package is used to reformat R code automatically (wrap long lines, add
spaces and indent, etc), without sacrificing comments as
<code>keep.source=FALSE</code> does</li>
<li>more than 20 graphics devices are directly supported: with <code>dev='CairoPNG'</code>
in the chunk options, you can switch to the <code>CairoPNG()</code> device in
<a href="https://cran.rstudio.com/package=Cairo"><strong>Cairo</strong></a> in a second; with
<code>dev='tikz'</code>, the <code>tikz()</code> device in
<a href="https://cran.rstudio.com/package=tikzDevice"><strong>tikzDevice</strong></a> is used;
Could anything be easier than that? These built-in devices (strictly speaking,
wrappers) use inches as units, even for bitmap devices (pixels are
converted to inches by the option <code>dpi</code>, which defaults to 72)</li>
<li>even more flexibility on graphics:

<ul>
<li>width and height in the output document of plots can be additionally
specified (the <code>fig.width</code> option is for the graphics device, and
<code>out.width</code> is for the output document; think <code>out.width='.8\\textwidth'</code>)</li>
<li>locations of plots can be rearranged: they can either appear exactly in the
place where they are created, or go to the end of a chunk together
(option <code>fig.show='hold'</code>)</li>
<li>multiple plots per code chunk are recorded, unless you really  want to keep
the last plot only (option <code>fig.keep='last'</code>)</li>
</ul></li>
<li>R code not only can come from code chunks in the input document, but also may
be from an external R script, which makes it easier to run the code as you
write the document (this will especially benefit LyX)</li>
<li>for power users, further customization is still possible:

<ul>
<li>the regular expressions to parse R code can be defined, i.e., you do not
have to use <code>&lt;&lt;&gt;&gt;=</code> and <code>@</code> or <code>\Sexpr{}</code>; if you like, you can use any
patterns, e.g., <code>%% begin.rcode</code> and <code>%% end.rcode</code></li>
<li>hooks can be defined to control the output; e.g. you may want to put errors
in red bold texts, or you want the source code to be italic, etc; hooks
can also be defined to be executed before or after a code chunk, and
there are infinite possibilities to extend the power of this package by
hooks (e.g. animations, rgl 3D plots, &hellip;)</li>
</ul></li>
</ul>

<p>Lots of efforts have been made to producing beautiful output and enhancing
readability by default. For example, code chunks are highlighted and put in
a shaded environment in LaTeX with a very light gray background (the
<a href="https://www.ctan.org/pkg/framed"><strong>framed</strong></a> package), so they can stand out
a little bit from other texts. The reading experience is hopefully better
than the <code>verbatim</code> or <code>Verbatim</code> environments. The leading characters <code>&gt;</code>
and <code>+</code> (called prompts) in the output are <em>not</em> added by default (you can
bring them back by <code>prompt=TRUE</code>, though). I find them really annoying in
the output when I read the output document, because it is so very
inconvenient to copy and run the code which is messed up by these characters.</p>

<h2 id="acknowledgements">Acknowledgements</h2>

<p>I thank the authors of Sweave, <strong>pgfSweave</strong>, <strong>cacheSweave</strong>, <strong>brew</strong>, <strong>decumar</strong>,
<strong>R2HTML</strong>, <strong>tikzDevice</strong>, <strong>highlight</strong>, <strong>digest</strong>, <strong>evaluate</strong>, <strong>roxygen2</strong> and of course, R,
for the many inspiring ideas and tools. I really appreciate the
<a href="https://github.com/yihui/knitr/issues">feedback</a> from many early beta
testers. This package was initiated based on the design of <strong>decumar</strong>.</p>

<h2 id="foas">FOAS</h2>

<p><img src="https://db.yihui.name/imgur/XmT6L3F.png" style="float:right;margin-left:1em" width=150 />
<strong>knitr</strong> is proudly affiliated with the <a href="http://www.foastat.org/">Foundation for Open Access
Statistics</a> (FOAS). FOAS is a nonprofit public
benefit corporation with a worldwide mission to promote free software, open
access publishing, and reproducible research in statistics.</p>



  <footer>
  
<nav class="post-nav">
  <span class="nav-prev"></span>
  <span class="nav-next"></span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
  } else if (e.which == 39) {  
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  

  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

