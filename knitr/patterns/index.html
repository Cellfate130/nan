<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Patterns - A list of regular expressions to extract R code and chunk options from the input document  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="Patterns - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="The object knit_patterns manages patterns in knitr. For example, we can use knit_patterns$get() to check the current pattern list. A pattern list includes the following components:
[&amp;hellip;] Patterns &amp;hellip;">
      <meta property="og:description" content="The object knit_patterns manages patterns in knitr. For example, we can use knit_patterns$get() to check the current pattern list. A pattern list includes the following components:
[&amp;hellip;] Patterns &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="https://yihui.name/images/logo.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="knitr">
    <header class="masthead">
      

<h1><a href="/knitr/"><img src="/knitr/images/knit-logo.png" alt="knitr logo" /></a></h1>
<p class="tagline">knitr: elegant, flexible, and fast dynamic report generation with R</p>


      <nav class="menu">
  <ul>
  
  
  <li><a href="/knitr/">Home</a></li>
  
  <li><a href="/knitr/options/">Options</a></li>
  
  <li><a href="/knitr/hooks/">Hooks</a></li>
  
  <li><a href="/knitr/demos/">Examples</a></li>
  
  <li><a href="/knitr/faq/">FAQ</a></li>
  
  <li><a href="https://github.com/yihui/knitr">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>



<li><a href="https://github.com/rbind/yihui/edit/master/content/knitr%5cpatterns.md" target="_blank">Edit this page</a></li>


<li><a href="/knitr/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Patterns</h1>
<h1><span class="subtitle">A list of regular expressions to extract R code and chunk options from the input document</span></h2>

<h3>
2017-02-03</h3>

<hr>


      </header>





<p>The <a href="../objects">object</a> <code>knit_patterns</code> manages patterns in <strong>knitr</strong>. For example, we can use <code>knit_patterns$get()</code> to check the current pattern list. A pattern list includes the following components:</p>

<ul>
<li><code>chunk.begin</code>: the pattern for the beginning of a code chunk; it must contain a group defined by <code>()</code>, which will be used to extract chunk options</li>
<li><code>chunk.end</code>: the pattern for the end of a chunk (the original meaning of this pattern in literate programming is different: it used to indicate the beginning of normal text; if you want the original meaning, see the <a href="../options/">package option</a> <code>filter.chunk.end</code>)</li>
<li><code>chunk.code</code>: the pattern to be used to extract R code from a chunk by removing characters of this pattern</li>
<li><code>inline.code</code>: the pattern to be used to extract the pieces of R code mixed inline with other texts (i.e. those which are not in separate code chunks); like <code>chunk.begin</code>, it must contain a group</li>
<li><code>inline.comment</code>: the pattern of inline comments (tokens of inline R code will be removed from lines that match with this pattern)</li>
<li><code>header.begin</code>: the pattern to find out where the document header begins; this is used to insert some header information into the output document (e.g. commands in the preamble in LaTeX, or CSS styles in HTML)</li>
<li><code>document.begin</code>: the pattern to find out where the body of the document begins (it can be used, for example, to extract the LaTeX preamble so we can externalize tikz graphics, or insert code for syntax highlighting)</li>
</ul>

<p>Patterns that are <code>NULL</code> will not be matched.</p>

<p>Like Sweave, there are two types of R code in <strong>knitr</strong>: code chunks (like paragraphs) and inline R code which will be executed within text lines. For chunks in a document, options are of the form <code>label, opt1=TRUE, opt2=FALSE, opt3='character.string'</code> (connected by <code>,</code> and <code>=</code>; only the chunk label does not need to have a <code>value</code>, since it is implicitly the <code>value</code> of the chunk option <code>label</code>).</p>

<h2 id="built-in-patterns">Built-in Patterns</h2>

<p>There are several built-in pattern lists in <strong>knitr</strong> which are stored in <code>all_patterns</code>.</p>

<pre><code class="language-r">library(knitr)
str(all_patterns)
</code></pre>

<p><strong>Knitr</strong> will first examine the content of the input to decide an appropriate set of patterns, if this automatic detection fails, then depending on the extension of the input filename, <strong>knitr</strong> will automatically choose a pattern list from the above lists, e.g. <code>file.Rnw</code> will use <code>all_patterns$rnw</code>, and <code>file.html</code> will use <code>all_patterns$html</code>, etc.</p>

<p>A series of convenience functions <code>pat_rnw()</code>, <code>pat_html()</code>, <code>pat_md()</code>, <code>pat_tex()</code> and <code>pat_brew()</code> can be used to set built-in patterns.</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/knitr/demo/showcase/">knitr showcase</a></span>
  <span class="nav-next"><a href="/knitr/options/">Options</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/knitr\/demo\/showcase\/';
    
  } else if (e.which == 39) {  
    
    url = '\/knitr\/options\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

