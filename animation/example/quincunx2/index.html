<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>quincunx2() - Demonstration of the Galton Box, example 2  - Yihui Xie | 谢益辉</title>
    <meta property="og:title" content="quincunx2() - Yihui Xie | 谢益辉">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="Demonstration of the Quincunx (Bean Machine/Galton Box)
Simulates the quincunx with &amp;lsquo;balls&amp;rsquo; (beans) falling through several layers (denoted by triangles) and the distribution of the final &amp;hellip;">
      <meta property="og:description" content="Demonstration of the Quincunx (Bean Machine/Galton Box)
Simulates the quincunx with &amp;lsquo;balls&amp;rsquo; (beans) falling through several layers (denoted by triangles) and the distribution of the final &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="https://yihui.name/images/logo.png">
    
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<link rel="stylesheet" href="/css/custom.css" />

  </head>

  
  <body class="animation">
    <header class="masthead">
      

<h1><a href="/"><img src="/images/logo.png" alt="Yihui Xie" /></a></h1>



      <nav class="menu">
  <ul>
  
  
  <li><a href="/animation/">Home</a></li>
  
  <li><a href="/animation/examples/">Examples</a></li>
  
  <li><a href="/animation/export/">Export</a></li>
  
  <li><a href="/animation/resources/">Resources</a></li>
  
  <li><a href="https://github.com/yihui/animation">Github repo</a></li>
  
  <li><a href="/">Yihui Xie</a></li>
  
  

<li class="menu-extra"></li>






<li><a href="https://github.com/rbind/yihui/edit/master/content/animation/example/quincunx2.Rmd" target="_blank">Edit this page</a></li>


<li><a href="/animation/index.xml" type="application/rss+xml" title="RSS feed">Subscribe</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">License</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>quincunx2()</h1>
<h1><span class="subtitle">Demonstration of the Galton Box, example 2</span></h2>

<h3>Yihui Xie &amp; Lijia Yu / 
2017-04-04</h3>

<hr>


      </header>



<p>Demonstration of the Quincunx (Bean Machine/Galton Box)</p>

<p>Simulates the quincunx with &lsquo;balls&rsquo; (beans) falling through several layers
(denoted by triangles) and the distribution of the final locations at which
the balls hit is denoted by a histogram.</p>

<p><code>quincunx()</code> is used to model intergenerational variation: balls are dropped from
the top and cascade randomly through rows of alternating offset pins, landing in
compartments at the bottom as a binomial or approximately normal distribution<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>.</p>

<p><code>quincunx2()</code> is afforded insight into regression to the mean. When the pellets
in an upper compartment are released, their average final position is directly
below. But what if we ask of a compartment at the lower level, from where did
these pellets come? The answer was not &lsquo;on average, directly above&rsquo;. Rather,
it was &lsquo;on average, more towards the middle&rsquo;, for the simple reason that there
were more pellets above it towards the middle that could wander left than there
were in the left extreme that could wander to the right, inwards<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>.</p>

<p>The bean machine, also known as the quincunx or Galton box, is a device
invented by Sir Francis Galton to demonstrate the law of error and the normal
distribution.</p>

<p>When a ball falls through a layer, it can either go to the right or left side
with the probability 0.5. At last the location of all the balls will show us
the bell-shaped distribution.</p>

<pre><code class="language-r">library(animation)
set.seed(123)
ani.options(nmax = 200 + 15 - 2, 2)
freq = quincunx2(balls = 200, col.balls = rainbow(200))
</code></pre>

<pre><code class="language-r">## frequency table
barplot(freq$top, space = 0)  # top layers
</code></pre>

<pre><code class="language-r">barplot(freq$bottom, space = 0)  # bottom layers
</code></pre>

<video controls loop autoplay><source src="https://assets.yihui.name/figures/animation/example/quincunx2/demo-a.mp4?dl=1" /><p>plot of chunk demo-a</p></video>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">Darwin, Galton and the Statistical Enlightenment, <a href="http://onlinelibrary.wiley.com/doi/10.1111/j.1467-985X.2010.00643.x/full">http://onlinelibrary.wiley.com/doi/10.1111/j.1467-985X.2010.00643.x/full</a> 
 <a class="footnote-return" href="#fnref:1">↩</a></li>
</ol>
</div>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/animation/example/sample-cluster/">sample.cluster()</a></span>
  <span class="nav-next"><a href="/animation/example/quincunx/">quincunx()</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/animation\/example\/sample-cluster\/';
    
  } else if (e.which == 39) {  
    
    url = '\/animation\/example\/quincunx\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "http:\/\/yihui.name" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//yihui.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    
    if (location.hash.match(/^#comment/)) return(l());
    var t = d.getElementById('disqus_thread');
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="/js/external-link.js"></script>

<script async src="/js/center-img.js"></script>

<script async src="/js/right-quote.js"></script>

<script async src="/js/no-highlight.js"></script>

<script async src="/js/fix-footnote.js"></script>

<script async src="/js/math-code.js"></script>



<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="/">Yihui Xie</a> 2005 - 2018</div>
  
  </footer>
  </article>
  
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-1988641-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

